// Generated by CoffeeScript 1.4.0
(function() {

  Class('InfoBox')({
    prototype: {
      init: function(infoboxData, template, sidebar) {
        this.sidebarChart = sidebar;
        this.infoboxData = infoboxData;
        return this.infoboxTemplate = $(template).html();
      },
      render: function() {
        this.infobox = $(_.template(this.infoboxTemplate, {
          data: this.infoboxData
        }));
        if (this.infoboxData.type.indexOf('chart-') !== -1) {
          this.infobox.find('.graphic').addClass(this.infoboxData.type);
          new InfoChart(this.infobox.find('.graphic.large')[0], this.infoboxData).chartInstance;
          if (this.sidebarChart) {
            new InfoChart(this.infobox.find('.graphic.small')[0], this.infoboxData, this.sidebarChart).chartInstance;
          }
        }
        if (this.infoboxData.number != null) {
          if (this.infoboxData.number.length > 9) {
            this.infobox.find('.graphic-number').addClass('smaller-number');
          }
        }
        return this.infobox;
      }
    }
  });

}).call(this);
