// Generated by CoffeeScript 1.4.0
(function() {

  Class('InfoClipartGallery')({
    prototype: {
      init: function(element, initData, numberCombination) {
        this.element = typeof element === 'string' ? $(element) : element;
        this.template = this.element.find('.clipart-template').html();
        this.element.find('.clipart-placeholder').html('').append(this.template);
        this.gallery = this.element.find('.clipart-panel');
        this.layout = this.element.find('.clipart-layout');
        this.layoutOptions = this.element.find('.layout-options');
        this.bindEvents();
        if (initData) {
          this.initData = initData;
          this.setEditionMode();
        } else {
          this.selectImage(this.gallery.children(':eq(0)').attr('data-clipart-url'));
        }
        if (numberCombination) {
          this.layoutOptions.hide();
        }
        return this.element.show();
      },
      bindEvents: function() {
        var _this = this;
        return this.gallery.delegate('.clipart-sample', 'click', function(e) {
          return _this.selectImage($(e.target).parents('.clipart-sample').attr('data-clipart-url'));
        });
      },
      selectImage: function(selectedId) {
        var selectedNode;
        selectedNode = this.gallery.find("[data-clipart-url=\"" + selectedId + "\"]");
        this.gallery.children().each(function() {
          return $(this).removeClass('selected');
        });
        selectedNode.addClass('selected');
        this.selectedUrl = selectedNode.attr('data-clipart-url');
        return this.element.trigger('infoEditorChange.clipart');
      },
      setEditionMode: function() {
        this.selectImage(this.initData.graphic);
        return this.layout.val(this.initData.layout);
      },
      getData: function() {
        var result;
        return result = {
          graphic: this.selectedUrl,
          layout: this.layout.val()
        };
      }
    }
  });

}).call(this);
